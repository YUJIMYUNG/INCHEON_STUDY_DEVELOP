# 데이터 베이스

> 데이터베이스란?
Data(자료)+Base(모임/집합) 으로 DataBase는 자료의 집합이라고 할 수 있다.
> 

### 데이터 베이스의 종류

1. 트리형
2. 네트워크형
3. NOSQL
4. 관계형

## 관계형 데이터 베이스

- 관계 (둘 이상의 사람이 관련이 있음이나 관련 뜻)
1. 헹(가로)과 열(세로)로 이루어진 데이터의 집합 → 표/테이블
2. 표/테이블을 고유/식별 값을 참조하여 서로 다른 테이블끼리 종속되는 관계를 표현하는 구조

### 관계형 데이터베이스를 제공하는 프로그램(DBMS)

- Oracle
- mySQL
- MariaDB
- Microsoft SQL Server

> 필수 용어
1. DB : 데이터 베이스
2. DBA : 데이터베이스 관리자
3. DBMS : 데이터베이스 관리 시스템
4. DB SERVER : 데이터베이스가 저징되고 데이터를 제공하는 컴퓨터
  - SERVER : 데이터를 제공하는 컴퓨터 vs CLIENT : 데이터를 요청 하는 컴퓨터
5. SQL : 데이터베이스 시스템 프로그램이 이해할 수 있는 언어

[용어들 관계]
DB SERVER PC ←————————————————————→ 개발자(DBA)
     - mySQL
    ←——— [한글] 식단표 만들어 ————
    ←——— [SQL] create table 식단표() ————
> 

## 용어, 관점 차이에 따른 용어

| 파일시스템 관점 | 모델링 관점 | 관계형 관점 |
| --- | --- | --- |
| 파일 | 엔티티 | 테이블, 릴레이션 |
| 레코드 | 튜플 | 행(가로) |
| 필드 | 속성 | 열(세로) |
1. 테이블(table) : 표, 릴레이션(Relation), 엔티티(Entity)
2. 레코드(Record) : 튜플(tuple), 행(row), 가로 한 줄 단위
3. 필드(Field) : 속성(Attribute), 열(column), 세로 한 줄 단위

### database, table 생성/제거 하기

1. 현재 db server 내 모든테이블 확인, 데이터베이스란 ? 표/테이블, 기본 테이블 4개의 테이블명 출력된다.

**`show** **databases**;`

2. db server local path 확인

**`show** variables **like** **'datadir'**;`

- - 3. db server 데이터베이스 생성

**`create** **database** myDBtest1;`

- - 4.db server 데이터베이스 삭제

**`DROP** **database** myDBtest1;`

- - 4.2 만약에 데이터베이스가 존재하면 삭제

**`DROP** **database** **if** exsits myDBtest1;`

- - 5. db server에는 여러개 데이터베이스가 존재하므로 사용/활성화

**`use** myDBtest1;`

### 간단한 키오스크 만들어보기

- (관계) 관계형 데이터베이스, 왜? 서로 다른테이블간의 연결 ()
    - 카테고리 번호(카테고리 식별) 가 필요한 이유 ?? 카테고리명을 식별 역할로 사용하지 않고 번호로 식별한다.

```sql
create table 카테고리(카테고리번호PK char(10));  -- 상위 테이블 
create table 제품(제품명 varchar(50), 가격 int);  -- 하위 테이블 
create table 제품(제품번호PK varchar(50), 가격 int, 카테고리번호FK int ); -- 하위테이블 더 효율적이다 

create table 주문(주문번호PK int, 주문날짜 date); -- 상위 테이블 
create table 주문상세(주문상셍번호PK int, 주문수량 int, 주문번호FK int, 제품번호PK int); -- 하위 테이블
```

- 관례적으로 모든 테이블에는 1개 이상의 식별데이터/번호가 존재한다. (기본키- `pk`)
- pk가 다른 테이블에서 사용/참조한다. (참조키 - `fk`)

## 테이블 생성시 필드(데이터) 타입

- java의 데이터타입 역할이 같다.

| 정수 | TINYINT | 1바이트 | -128~127 |
| --- | --- | --- | --- |
|  | SMALLINT | 2바이트 | +- 약 3만 |
|  | MEDIUMINT | 3바이트 | +- 약800만 |
|  | INT | 4바이트 | +- 약 21억 |
|  | BIGINT | 8바이트 | +- 21억 이상 |
| 실수(=부동소수점,오차 존재) | FLOAT | 4바이트 |  |
|  | DOUBLE | 8바이트 |  |
| 문자 타입으로 저장되는 숫자
(오차 없는 실수 표현) | DECIMAL |  |  |
| 날짜/시간 | DATE | 날짜표현 | 1000년~9999년, 0000-00-00 |
|  | DATETIME | 날짜와 시간 표현 | 0000-00-00 00:00:00 |
|  | TIME | 시간 표현 | 00:00:00 |
| 문자열 | CHAR(문자길이) | 고정길이 | 최대 1~255글자
ex) “유재석” → [유][재][석][][] |
|  | VARCHAR(문자길이) | 가변길이 | 최대 1~255글자
ex) “유재석” → [유][재][석] |
|  | TEXT |  | 최대길이 6만개 글자 표현 |
|  | LONGTEXT |  | 최대 길이 42억개 글자 표현(4GB) |
| 논리 | BOOL | true/false | 실제로는 0 또는 1이 표현된다. |

## 제약 조건

1. `not null` : 해당 필드에 null 값을 포함하지 않는다는 뜻
2. `default 초기값` : 해당 필드에 레코드(값) 삽입시 비어있는 경우 기본값을 지정한다. 
3. `unique` : 해당 필드에 중복된 값을 허용하지 않는다. (중복제거) 레코드 삽입시 데이터가 중복이면 오류 발생 
4. `auto_increment` : 해당 필드에 레코드 삽입시 자동으로 번호가 삽입된다. (oracle 적용X)
5. `primary key` : 테이블의 식별필드, (기본키, PK), 식별 가능한 고유 값을 가진 키, 참조 당하는 키
    - primary key(pk 필드명)
6. `foreign key` : 테이블의 참조필드, (참조키, FK), 다른 테이블내 기본키를 참조하는 키, 참조 하는 키
    - foreign key(fk 필드명) references 참조테이블명(pk 필드명)

적용 예시

```sql
create table member(
	회원번호 int unsigned not null auto_increment,  	-- 회원번호는 일반적으로 가인ㅂ순서대로 1부터 저장하기 위해서 int를 사용한다. 
		-- ungisgned : [부호가 없다는 뜻] 음수를 사용하지 않고 음수를 사용할 데이터 만큼 양수 사용 
	아이디 varchar(30) unique,		-- 아이디는 최대 30글자만 입력받을 예정이라서 varchar(30)을 사용했다. 
	비밀번호 varchar(30),		-- 비밀번호는 최대 30글자만 입력받을 예정이라서 varchar(30)을 사용했다.  
	연락처 char(13),			-- 010-1234-5678 형식으로 받을 예정이라서 char(13)을 사용했다. 
	광고전송여부 boolean default 0,		-- true / false 형식으로 저장할 예정이라서 
	가입일 datetime			-- 2024-11-21 00:00:)) 형식으로 저장할 예정이라서 datetime을 사용했다. 
	primary key(회원번호)		-- 저장한 필드를 PK(기본키) 로 사용하겠다. 
	-- 아이디 대신에 회원번호를 사용한 이유? 1. 용량이 작다, 2.  중복배제  
);
```